{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Omar/Desktop/ORION/orion/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _AuthService;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/auth\";\nimport * as i2 from \"@angular/router\";\nexport class AuthService {\n  constructor(afAuth,\n  // Servicio de autenticación de Firebase\n  router // Servicio de enrutamiento de Angular\n  ) {\n    this.afAuth = afAuth;\n    this.router = router;\n    // Monitorear el estado de autenticación del usuario\n    this.afAuth.authState.subscribe(user => {\n      if (user) {\n        this.userData = user; // Asignar datos del usuario si está logueado\n        localStorage.setItem('user', JSON.stringify(this.userData)); // Guardar datos en localStorage\n        console.log('service user (recordar borrar devs)', this.userData);\n      } else {\n        localStorage.removeItem('user'); // Limpiar datos si no hay usuario logueado\n      }\n    });\n  }\n  // Método para iniciar sesión con correo y contraseña\n  signIn(email, password) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const result = yield _this.afAuth.signInWithEmailAndPassword(email, password);\n        _this.userData = result.user; // Asignar datos del usuario al iniciar sesión\n        localStorage.setItem('user', JSON.stringify(_this.userData)); // Guardar en localStorage\n      } catch (error) {\n        throw error; // Lanzar error para que el componente lo maneje\n      }\n    })();\n  }\n  // Método para cerrar sesión\n  signOut() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield _this2.afAuth.signOut(); // Cerrar sesión en Firebase\n      localStorage.removeItem('user'); // Limpiar localStorage\n      _this2.router.navigate(['login']); // Redirigir al login\n    })();\n  }\n  // Getter para comprobar si el usuario está logueado\n  get isLoggedIn() {\n    const user = localStorage.getItem('user'); // Comprobar si hay datos del usuario en localStorage\n    return user !== null; // Devolver true si existe, false en caso contrario\n  }\n}\n_AuthService = AuthService;\n_AuthService.ɵfac = function AuthService_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _AuthService)(i0.ɵɵinject(i1.AngularFireAuth), i0.ɵɵinject(i2.Router));\n};\n_AuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _AuthService,\n  factory: _AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["AuthService","constructor","afAuth","router","authState","subscribe","user","userData","localStorage","setItem","JSON","stringify","console","log","removeItem","signIn","email","password","_this","_asyncToGenerator","result","signInWithEmailAndPassword","error","signOut","_this2","navigate","isLoggedIn","getItem","i0","ɵɵinject","i1","AngularFireAuth","i2","Router","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Omar\\Desktop\\ORION\\orion\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\r\nimport { Router } from '@angular/router';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthService {\r\n  userData: any; // Guarda los datos del usuario logueado\r\n\r\n  constructor(\r\n    private afAuth: AngularFireAuth, // Servicio de autenticación de Firebase\r\n    private router: Router // Servicio de enrutamiento de Angular\r\n  ) {\r\n    // Monitorear el estado de autenticación del usuario\r\n    this.afAuth.authState.subscribe((user) => {\r\n      if (user) {\r\n        this.userData = user; // Asignar datos del usuario si está logueado\r\n        localStorage.setItem('user', JSON.stringify(this.userData)); // Guardar datos en localStorage\r\n        console.log('service user (recordar borrar devs)', this.userData);\r\n      } else {\r\n        localStorage.removeItem('user'); // Limpiar datos si no hay usuario logueado\r\n      }\r\n    });\r\n  }\r\n\r\n  // Método para iniciar sesión con correo y contraseña\r\n  async signIn(email: string, password: string): Promise<void> {\r\n    try {\r\n      const result = await this.afAuth.signInWithEmailAndPassword(email, password);\r\n      this.userData = result.user; // Asignar datos del usuario al iniciar sesión\r\n      localStorage.setItem('user', JSON.stringify(this.userData)); // Guardar en localStorage\r\n    } catch (error) {\r\n      throw error; // Lanzar error para que el componente lo maneje\r\n    }\r\n  }\r\n\r\n  // Método para cerrar sesión\r\n  async signOut(): Promise<void> {\r\n    await this.afAuth.signOut(); // Cerrar sesión en Firebase\r\n    localStorage.removeItem('user'); // Limpiar localStorage\r\n    this.router.navigate(['login']); // Redirigir al login\r\n  }\r\n\r\n  // Getter para comprobar si el usuario está logueado\r\n  get isLoggedIn(): boolean {\r\n    const user = localStorage.getItem('user'); // Comprobar si hay datos del usuario en localStorage\r\n    return user !== null; // Devolver true si existe, false en caso contrario\r\n  }\r\n}\r\n"],"mappings":";;;;;AAOA,OAAM,MAAOA,WAAW;EAGtBC,YACUC,MAAuB;EAAE;EACzBC,MAAc,CAAC;EAAA,E;IADf,KAAAD,MAAM,GAANA,MAAM;IACN,KAAAC,MAAM,GAANA,MAAM;IAEd;IACA,IAAI,CAACD,MAAM,CAACE,SAAS,CAACC,SAAS,CAAEC,IAAI,IAAI;MACvC,IAAIA,IAAI,EAAE;QACR,IAAI,CAACC,QAAQ,GAAGD,IAAI,CAAC,CAAC;QACtBE,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACJ,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC7DK,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAE,IAAI,CAACN,QAAQ,CAAC;MACnE,CAAC,MAAM;QACLC,YAAY,CAACM,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;MACnC;IACF,CAAC,CAAC;EACJ;EAEA;EACMC,MAAMA,CAACC,KAAa,EAAEC,QAAgB;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MAC1C,IAAI;QACF,MAAMC,MAAM,SAASF,KAAI,CAAChB,MAAM,CAACmB,0BAA0B,CAACL,KAAK,EAAEC,QAAQ,CAAC;QAC5EC,KAAI,CAACX,QAAQ,GAAGa,MAAM,CAACd,IAAI,CAAC,CAAC;QAC7BE,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACO,KAAI,CAACX,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC/D,CAAC,CAAC,OAAOe,KAAK,EAAE;QACd,MAAMA,KAAK,CAAC,CAAC;MACf;IAAC;EACH;EAEA;EACMC,OAAOA,CAAA;IAAA,IAAAC,MAAA;IAAA,OAAAL,iBAAA;MACX,MAAMK,MAAI,CAACtB,MAAM,CAACqB,OAAO,EAAE,CAAC,CAAC;MAC7Bf,YAAY,CAACM,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;MACjCU,MAAI,CAACrB,MAAM,CAACsB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAAA;EACnC;EAEA;EACA,IAAIC,UAAUA,CAAA;IACZ,MAAMpB,IAAI,GAAGE,YAAY,CAACmB,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;IAC3C,OAAOrB,IAAI,KAAK,IAAI,CAAC,CAAC;EACxB;;eAzCWN,WAAW;;mCAAXA,YAAW,EAAA4B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,eAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,MAAA;AAAA;;SAAXjC,YAAW;EAAAkC,OAAA,EAAXlC,YAAW,CAAAmC,IAAA;EAAAC,UAAA,EAFV;AAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}